{% load static %}
<html lang="en-us">
<head>
<link rel="stylesheet" type="text/css" href="{% static 'css/base.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/form.css' %}">
</head>
<body class=" app-core model-field change-form" >
 <p class="font-weight-bold h1" style="text-align:center; color:#4D2994; font-size: 350%;">TimeSheet</p>
    <div id="content-main" style="color:#4D2994">
    <form  action="{% url 'save' %}"method="post">
        {% csrf_token %}
        {{task_form.as_p}}
        <fieldset class="module aligned ">
            <div class="form-row field-role">
                <div>
                    <label class="required" for="id_role">Role:</label>
                    <div class="related-widget-wrapper">
                        <select name="role_name" required="" id="id_role" onchange="javascript: dynamicdropdown(this.options[this.selectedIndex].value);">
                            <option value="QA" selected >QA</option>
                            <option value="Dev" >Dev</option>
                            <option value="Support">Support</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="form-row field-team_member">
                <div>
                    <label class="required">Team member:</label>
                    <script type="text/javascript" language="JavaScript">
                        document.write('<select name="mem_name" id="status"><option value="">--Select--</option></select>')
                        </script>
                        <noscript>
                            <select id="mem_name" name="mem_name"></select>
                        </noscript>
                </div>
            </div>
             <div class="form-row field-team_name">
                <div>
                    <label class="required">Team Name:</label>
                    <script type="text/javascript" language="JavaScript">
                        document.write('<select name="team_name" id="status"><option value="iceman">iceman</option></select>')
                        </script>
                        <noscript>
                            <select id="team_name" name="team_name"></select>
                        </noscript>
                </div>
            </div>

            <div class="form-row field-category">
            <div>
                <label class="required" for="id_category">Category:</label>
                <select type="text" name="category" class="vTextField"  required="" id="id_category" onchange="javascript: pto(this.options[this.selectedIndex].value);">
                    <option value=" "> </option>
                    <option value="story">Story</option>
                    <option value="bug">Bug</option>
                    <option value="pto" >PTO</option>
                </select>
            </div>
            </div>



            <div class="form-row field-jira_ticket">
                <div>
                    <label class="required" for="id_jira_ticket_type">Jira ticket type:</label>
                    <select name="jira_ticket_type" id="id_jira_ticket_type">
                        <option value=""> </option>
                        <option value="eng">ENG</option>
                        <option value="hd">HD</option>
                    </select>

                </div>
                <div>
                    <label class="required" for="id_jira_ticket_number">Jira ticket number:</label>
                    <input type="number" name="jira_ticket_number" class="vIntegerField" maxlength="20" id="id_jira_ticket_number">
                </div>

            </div>

            <div class="form-row field-description">
                <div>
                    <label class="required" for="id_description">Description:</label>
                    <input type="text" name="description" size="40" class="vTextField" maxlength="100" required="" id="id_description">
                </div>
            </div>
            <div class="form-row field-sprint">
                <div>
                    <label class="required" for="id_sprint">Sprint:</label>
                    <input type="text" name="sprint" class="vTextField" maxlength="20" required="" id="id_sprint">
                </div>
            </div>

        <div class="form-row field-hours">
            <div>
                <label class="required" for="id_hours">Hours:</label>
                <input type="number" name="hours" class="vIntegerField" required="" id="id_hours" value="8">
            </div>

        </div>

        <div class="form-row field-week">
            <div>
                <label class="required">Date</label>
                 <input type="date" name="date" id="date">
            </div>
        </div>
        </fieldset>

        <input type="submit" value="Save" class="default" name="_save">
    </form>
 </div>
</body>
  <script>
    function dynamicdropdown(listindex)
    {
        switch (listindex)
        {
        case "QA" :
            document.getElementById("status").options[0]=new Option("--Select--","");
            document.getElementById("status").options[1]=new Option("Archana","Archana");
            document.getElementById("status").options[2]=new Option("Sridhar","Sridhar");
            break;
        case "Dev" :
            document.getElementById("status").options[0]=new Option("--Select--","");
            document.getElementById("status").options[1]=new Option("Vibhash","Vibhash");
            document.getElementById("status").options[2]=new Option("Praveen","Praveen");
            document.getElementById("status").options[3]=new Option("Rajesh","Rajesh");
            break;
        case "Support" :
            document.getElementById("status").options[0]=new Option("--Select--","");
            document.getElementById("status").options[1]=new Option("Dheeraj","Dheeraj");
            document.getElementById("status").options[2]=new Option("Swetha","Swetha");
            document.getElementById("status").options[3]=new Option("Srikanth","Srikanth");
            break;
        }
        return true;
    }

function getDate() {
  var today = new Date();
  var dd = today.getDate();
  var mm = today.getMonth()+1; //January is 0!
  var yyyy = today.getFullYear();

  if(dd<10) {
      dd = '0'+dd
  }

  if(mm<10) {
      mm = '0'+mm
  }

  today = yyyy + '-' + mm + '-' + dd;
  console.log(today);
  document.getElementById("date").value = today;
}
window.onload = function() {
  getDate();
  dynamicdropdown('QA');
}

function pto(val){
    if(val == "PTO")
        document.getElementById("id_description").value = "PTO";
}


</script>
</html>